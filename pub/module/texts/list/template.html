<!--<div id="/module/texts/list/template.html">-->
<!--<div ng-if="!textsList.showSearch" ng-include="'/module/texts/list/template.html#defaultToolbar'"></div>-->
<!--<div ng-if="textsList.showSearch" ng-include="'/module/texts/list/template.html#searchToolbar'"></div>-->
<!--<div ng-include="'/module/texts/list/template.html#content'"></div>-->
<!--</div>-->

<div ng-if="!textsList.showSearch" ng-include="'/module/texts/list/template.html#defaultToolbar'"></div>
<div ng-if="textsList.showSearch" ng-include="'/module/texts/list/template.html#searchToolbar'"></div>
<md-content layout="column" flex md-scroll-y>
  <md-card>
    <md-list>
      <md-divider></md-divider>
      <md-list-item
        ng-repeat="text in textsList.textList"
        ng-click="app.navigateTo('texts.read', {id: text.id})">
        <p>{{text.title}}</p>
        <div ng-include="'/module/texts/list/template.html#submenu'"></div>
        <md-divider></md-divider>
      </md-list-item>
    </md-list>
  </md-card>
</md-content>

<script type="text/ng-template" id="/module/texts/list/template.html#defaultToolbar">
  <md-toolbar class="md-whiteframe-glow-z1 no-animate" ng-show="!textsList.showSearch">
    <div class="md-toolbar-tools">
      <md-button ng-click="$root.sidenav.toggle()" class="md-icon-button" hide-gt-sm aria-label="Toggle Menu">
        <md-icon md-svg-icon="general-menu"></md-icon>
      </md-button>

      <md-button ng-click="app.navigateTo('texts.create')" class="md-icon-button" aria-label="Add">
        <md-icon md-svg-icon="general-add"></md-icon>
      </md-button>

      <span flex></span>

      <md-button ng-click="textsList.showSearch = !textsList.showSearch" class="md-icon-button" aria-label="Search">
        <md-icon md-svg-icon="general-search"></md-icon>
      </md-button>

      <div ng-include="'/module/texts/list/template.html#orderBy'"></div>
    </div>
  </md-toolbar>
</script>

<script type="text/ng-template" id="/module/texts/list/template.html#searchToolbar">
  <md-toolbar class="md-whiteframe-glow-z1 no-animate" ng-show="textsList.showSearch">
    <div class="md-toolbar-tools">
      <md-button ng-click="textsList.showSearch = !textsList.showSearch" class="md-icon-button" aria-label="Close Search">
        <md-icon md-svg-icon="general-close"></md-icon>
      </md-button>

      <md-autocomplete
        id="textsList-searchInput" flex
        md-items="[]"
        md-no-progress
        md-search-text-change="ctrl.searchTextChange(ctrl.searchText)"
        md-search-text="ctrl.searchText"
        placeholder="Search">
      </md-autocomplete>

      <md-button ng-click="textsList.showSearch = !textsList.showSearch" class="md-icon-button" aria-label="Toggle Search">
        <md-icon md-svg-icon="general-search"></md-icon>
      </md-button>
    </div>
  </md-toolbar>
</script>

<script type="text/ng-template" id="/module/texts/list/template.html#content">
  <md-content layout="column" flex md-scroll-y>
    <md-card>
      <md-list>
        <md-divider></md-divider>
        <md-list-item
          ng-repeat="text in textsList.textList"
          ng-click="app.navigateTo(text.id)">
          <p>{{text.title}}</p>
          <div ng-include="'/module/texts/list/template.html#submenu'"></div>
          <md-divider></md-divider>
        </md-list-item>
      </md-list>
    </md-card>
  </md-content>
</script>

<script type="text/ng-template" id="/module/texts/list/template.html#submenu">
  <md-menu>
    <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button" aria-label="Open file submenu">
      <md-icon md-menu-origin md-svg-icon="general-more_vert"></md-icon>
    </md-button>
    <md-menu-content width="2">
      <md-menu-item>
        <md-button ng-click="textsList.rename(text.id)">
          <md-icon md-svg-icon="general-edit" md-menu-align-target></md-icon>
          Rename
        </md-button>
      </md-menu-item>
      <md-menu-item>
        <md-button ng-click="textsList.remove(text.id)">
          <md-icon md-svg-icon="general-delete"></md-icon>
          Delete
        </md-button>
      </md-menu-item>
    </md-menu-content>
  </md-menu>
</script>

<script type="text/ng-template" id="/module/texts/list/template.html#orderBy">
  <md-menu>
    <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button" aria-label="More Actions">
      <md-icon md-menu-origin md-svg-icon="general-more_vert"></md-icon>
    </md-button>
    <md-menu-content width="2">
      <md-menu-item ng-class="{'textsList-currentOrder' : 'newest' === textsList.currentOrder}">
        <md-button ng-click="textsList.orderBy('newest')">
          <md-icon md-svg-icon="sort_by-upward"></md-icon>
          <span>Newest first</span>
        </md-button>
      </md-menu-item>
      <md-menu-item ng-class="{'textsList-currentOrder' : 'oldest' === textsList.currentOrder}">
        <md-button ng-click="textsList.orderBy('oldest')">
          <md-icon md-svg-icon="sort_by-downward"></md-icon>
          <span>Older first</span>
        </md-button>
      </md-menu-item>
      <md-menu-item ng-class="{'textsList-currentOrder' : 'alfabet' === textsList.currentOrder}">
        <md-button ng-click="textsList.orderBy('alfabet')">
          <md-icon md-svg-icon="sort_by-alpha" md-menu-align-target></md-icon>
          <span>Alfabet</span>
        </md-button>
      </md-menu-item>
    </md-menu-content>
  </md-menu>
</script>
